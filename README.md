# lms
## Сваггер проекта
http://localhost:8080/swagger-ui/index.html (локально)

## Схема БД
![Схема базы данных](https://github.com/Valentina810/lms/blob/main/schema.png)

## Примерный дизайн 
https://www.figma.com/file/GoNQ6PeA0VtruUAWO1YlG1/LMS?type=design&mode=design&t=Ja79CpR8ynN0eVMP-1
## Мини-lms система для родителей, которые организуют семейное обучение детей дома
Первоначальный MVP не предусматривает регистрацию пользователей. 
Считаем что пользователь уже зарегистрирован. В таблице Users хранятся данные о пользователе: логин, пароль и токен. 
Для получения информации о пользователе необходимо сформировать запрос, передав в заголовке Authorization токен пользователя
(заглушка для будущей авторизации).  

## Эндпоинты (во всех нужно передавать заголовок Authorization):
### Контроллер /users

#### Запрос POST /users - создание пользователя, возвращает токен пользователя (для теста, в  UI интерфейсе регистрации пока не будет)
##### Специальные заголовки: нет
##### Тело
```
  {
  "name": "Василий",
  "surname":"Петров", 
  "login":"Vasek",
  "password":"apple",
  "email":"vasek@mail.ru",
  "datBirth":"2000-01-01",
  "avatarUrl":"https://pgcookbook.ru/programming/vasia.jpg"
  }
```

#### Ответ
##### Специальные заголовки: нет
##### Тело
```
  {
  "token": "djoijcoeij798"
  }
```
##### Возможные коды ответа:
- 201 - пользователь успешно создан
- 400 - в теле запроса ошибка (неверное название поля, не указан обязательный параметр)
- 403 - нет прав для создания пользователя (на данном этапе пока можно не добавлять, позже сделаем, когда будет контроль прав)
- 409 - конфликт (например, пользователь с таким email уже существует в БД)
- 500 - неизвестная ошибка сервера

Если возникла ошибка, то нужно в теле ответа возвращать причину ошибки  

#### Запрос PATCH /users/{userId} - изменение информации о пользователе
##### Специальные заголовки: 
Authorization: токен_пользователя
##### Тело
Учитываем что в теле может быть от 1 до 7 параметров
```
  {
  "name": "Василий",
  "surname":"Петров", 
  "login":"Vasek",
  "password":"apple",
  "email":"vasek@mail.ru",
  "dateBirth":"2000-01-01",
  "avatarUrl":"https://pgcookbook.ru/programming/vasia.jpg"
  }
```
#### Ответ
##### Специальные заголовки: нет
##### Тело: данные о пользователе с учетом обновления 
```
  {
  "id_user":2,
  "name": "Василий",
  "surname":"Петров", 
  "login":"Vasek",
  "email":"vasek@mail.ru",
  "dateBirth":"2000-01-01",
  "avatarUrl":"https://pgcookbook.ru/programming/vasia.jpg"
  }
  ```
- 200 - данные пользователя успешно изменены
- 400 - в теле запроса ошибка (неверное название поля, не указан обязательный параметр)
- 403 - нет прав для изменения данных (токен из заголовка не соответствует пользователю)
- 409 - конфликт (например, пользователь с таким email уже существует в БД и это не ткущий пользователь)
- 500 - неизвестная ошибка сервера

Если возникла ошибка, то нужно в теле ответа возвращать причину ошибки

#### Запрос GET /users - получение информации о пользователе (Имя, Фамилия, Логин, Дата рождения, Дата регистрации, Аватар)
##### Специальные заголовки:
Authorization: токен_пользователя
##### Тело: нет
#### Ответ
##### Специальные заголовки: нет
##### Тело: данные о пользователе
```
  {
  "id_user":2,
  "name": "Василий",
  "surname":"Петров", 
  "login":"Vasek",
  "email":"vasek@mail.ru",
  "date_birth":"2000-01-01",
  "date_registration":"2000-01-01",
  "avatar_url":"https://pgcookbook.ru/programming/vasia.jpg"
  }
  ```
- 200 - данные пользователя успешно получены
- 404 - по данному токену пользователь не найден
- 500 - неизвестная ошибка сервера

Если возникла ошибка, то нужно в теле ответа возвращать причину ошибки

### Контроллер /users/lessons
GET /users/lessons?from=2020-12-25&&to=2020-12-31 - получение информации о запланированных пользователем уроках 
в заданном диапазоне, включая указанные даты. Если параметры не указаны - то возвращаются уроки за текущую неделю.  
Список параметров по каждому событию:  
- Дата
- Время начала
- Время окончания
- Название предмета
- Отметка о выполнении (выставляется при % выполнения 100 автоматически или вручную при любом % выполнения)

GET /users/lesson/{lessonId}- получение информации о конкретном уроке. Возвращаются данные:  
- Дата
- Время начала
- Время окончания
- Название предмета
- Ссылка на теорию (ссылка на файл, пока просто храним как строку)
- Ссылка на практическое задание (ссылка на файл, пока просто храним как строку)
- Ссылка на домашнюю рабооту (ссылка на файл, пока просто храним как строку)
- % выполнения (от 0 до 100%)
- Отметка о выполнении (выставляется при % выполнения 100 автоматически или вручную при любом % выполнения)

POST /users/lesson - создание нового урока, в теле данные урока  
PATCH /users/lesson/{lessonId} - изменение урока, в теле данные урока  
DELETE /users/lesson/{lessonId} - удаление урока

