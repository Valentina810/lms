# Групповой пет-проект lms
Проект официально закрыт 

## Участники команды

#### Java Developer

- [Валентина](https://github.com/Valentina810)
- [Роман](https://github.com/Yudiol)

#### Frontend Developer (React)

- [Анна](https://github.com/AnnaSog)

#### Manual QA

- [Евгения](https://github.com/janekomarovskaja)

## Фронтенд+бэкенд
Бекенд развернут в песочнице openshift на базе h2, поэтому при первом обращении будет большой таймаут.
Вариант тестовый, на базе h2, поэтому изменения сохраняются на короткое время.

### https://lms-mini.vercel.app/ 

## Репозиторий бэкенда

https://github.com/Valentina810/lms

## Репозиторий фронтенда

 https://github.com/AnnaSog/LMS

## Тест-кейсы API

 https://docs.google.com/spreadsheets/d/1uZvrsg0FlwcaEs_8QjwqR4Y30nDS6iXhEKmZsSqvBKs/edit#gid=0

## Доска

https://github.com/users/Valentina810/projects/1

## Ссылка на макеты

https://www.figma.com/file/V7PLGct4lGmFJofvvbgxkw/LMS-(Copy)?type=design&node-id=0-1&mode=design&t=zOfw4q4RFrdDYrCx-0

## Схема БД

![Схема базы данных](https://github.com/Valentina810/lms/blob/main/schema.png)

## Мини-lms система для родителей, которые организуют семейное обучение детей дома

Первоначальный MVP не предусматривает регистрацию пользователей.
Считаем что пользователь уже зарегистрирован. В таблице Users хранятся данные о пользователе: логин, пароль и токен.

## Эндпоинты

### Контроллер /users

#### Запрос POST /users - создание пользователя, возвращает пользователя (для теста, в  UI интерфейсе регистрации пока не будет)

##### Специальные заголовки:

Content-Type : application/json

##### Тело

```
  {
  "name": "Василий",
  "surname":"Петров", 
  "login":"Vasek",
  "password":"apple",
  "email":"vasek@mail.ru",
  "datBirth":"2000-01-01",
  "avatarUrl":"https://pgcookbook.ru/programming/vasia.jpg"
  }
```

#### Ответ

##### Специальные заголовки: нет

##### Тело

```
  {
  "id":"1",
  "name": "Василий",
  "surname":"Петров", 
  "login":"Vasek",
  "email":"vasek@mail.ru",
  "datBirth":"2000-01-01",
  "avatarUrl":"https://pgcookbook.ru/programming/vasia.jpg"
  }
```

##### Возможные коды ответа:

- 201 - пользователь успешно создан
- 400 - в теле запроса ошибка
- 403 - нет прав для создания пользователя
- 409 - конфликт (например, пользователь с таким email уже существует в БД)
- 500 - неизвестная ошибка сервера

Ответы в случае ошибок:

| Ошибка | Дополнительная информация                           | Ответ                                                                                                                                                               |
|--------|-----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 400    | Ошибка в JSON                                       | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Неверная структура объекта: проверьте скобки, запятые и названия полей",  <br/>"date": "2023-09-11 19:06:04"<br/>} |
| 400    | Не передано поле Имя/пустое                         | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Имя обязательно для заполнения; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                       |
| 400    | Не передано поле Логин/пустое                       | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Login не должен быть пустым; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                          |
| 400    | Не передано поле Password/пустое                    | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Пароль не должен быть пустым",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                           |
| 400    | Не передано поле Email/пустое                       | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Поле Email обязательно для заполнения; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                |
| 403    | нет                                                 | {<br/>"status": "FORBIDDEN",  <br/>"message": "Нет прав для совершения операции",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                         |
| 409    | Пользователь с указанным  Email <br/>уже есть в БД  | {<br/>"status": "CONFLICT",  <br/>"message": "Эта электронная почта уже существует в базе данных",  <br/>"date": "2023-09-11 19:06:04"<br/>}                        |
| 500    | нет                                                 | {<br/>"status": "INTERNAL_SERVER_ERROR",  <br/>"message": "Неизвестная ошибка сервера",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                   |

Ограничения на длину полей при создании пользователя:

| Поле      | Ограничение                                                                                                                                                                                                                       | Код ответа | Ответ  в случае если ограничение не выполнено                                                                                                 |
|-----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| name      | Обязательное, не пустое, не более 250 символов                                                                                                                                                                                    | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Имя должно быть не больше 250 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}           |
| surname   | Не обязательное, не более 250 символов                                                                                                                                                                                            | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Фамилия должна быть не больше 250 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}       |
| login     | Обязательное, не пустое, не более 100 символов                                                                                                                                                                                    | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Login должен быть не больше 100 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}         |
| password  | Обязательное, не пустое, не более 100 символов                                                                                                                                                                                    | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Пароль должен быть не больше 100 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}        |
| email     | Обязательное, не пустое, не более 250 символов, должно соответствовать фоормату  Email: в стандарте указано, что имя пользователя не должно превышать 64 символа, имя домена ограничено 255 символами, а знак @ – это один символ | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Email должен быть не больше 250 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}         |
| avatarUrl | Не обязательное, не более 1000 символов                                                                                                                                                                                           | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Длина адреса должна быть не больше 1000 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>} |

#### Запрос PATCH /users/{userId} - изменение информации о пользователе

##### Специальные заголовки:

Content-Type : application/json

##### Тело

```
  {
  "name": "Василий",
  "surname":"Петров", 
  "login":"Vasek",
  "password":"apple",
  "email":"vasek@mail.ru",
  "dateBirth":"2000-01-01",
  "avatarUrl":"https://pgcookbook.ru/programming/vasia.jpg"
  }
```

#### Ответ

##### Специальные заголовки: нет

##### Тело: данные о пользователе с учетом обновления

```
  {
  "id_user":2,
  "name": "Василий",
  "surname":"Петров", 
  "login":"Vasek",
  "email":"vasek@mail.ru",
  "dateBirth":"2000-01-01",
  "avatarUrl":"https://pgcookbook.ru/programming/vasia.jpg"
  }
  ```

##### Возможные коды ответа:

- 200 - данные пользователя успешно изменены
- 400 - в теле запроса ошибка
- 403 - нет прав для изменения данных
- 409 - конфликт (например, пользователь с таким email уже существует в БД и это не ткущий пользователь)
- 500 - неизвестная ошибка сервера

Ответы в случае ошибок:

| Ошибка | Дополнительная информация                          | Ответ                                                                                                                                                               |
|--------|----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 400    | Ошибка в JSON                                      | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Неверная структура объекта: проверьте скобки, запятые и названия полей",  <br/>"date": "2023-09-11 19:06:04"<br/>} |
| 400    | Не передано поле Имя/пустое                        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Имя обязательно для заполнения; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                       |
| 400    | Не передано поле Логин/пустое                      | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Login не должен быть пустым; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                          |
| 400    | Не передано поле Email/пустое                      | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Поле Email обязательно для заполнения; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                |
| 403    | нет                                                | {<br/>"status": "FORBIDDEN",  <br/>"message": "Нет прав для совершения операции",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                         |
| 409    | Пользователь с указанным  Email <br/>уже есть в БД | {<br/>"status": "CONFLICT",  <br/>"message": "Эта электронная почта уже существует в базе данных",  <br/>"date": "2023-09-11 19:06:04"<br/>}                        |
| 500    | нет                                                | {<br/>"status": "INTERNAL_SERVER_ERROR",  <br/>"message": "Неизвестная ошибка сервера",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                   |

Ограничения на длину полей при редактировании пользователя:

| Поле      | Ограничение                                                                                                                                                                                                                        | Код ответа | Ответ  в случае если ограничение не выполнено                                                                                                 |
|-----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| name      | Обязательное, не пустое, не более 250 символов                                                                                                                                                                                     | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Имя должно быть не больше 250 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}           | 
| surname   | Не обязательное, не более 250 символов                                                                                                                                                                                             | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Фамилия должна быть не больше 250 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}       |
| login     | Обязательное, не пустое, не более 100 символов                                                                                                                                                                                     | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Login должен быть не больше 100 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}         |
| password  | Может быть пустым                                                                                                                                                                                                                  |            |                                                                                                                                               |
| email     | Обязательное, не пустое, не более 250 символов, должно соответствовать фоормату  Email: в стандарте указано, что имя пользователя не должно превышать 64 символа, имя домена ограничено 255 символами, а знак @ – это один символ  | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Email должен быть не больше 250 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}         |
| avatarUrl | Не обязательное, не более 1000 символов                                                                                                                                                                                            | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Длина адреса должна быть не больше 1000 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>} |

#### Запрос GET /users/{userId} - получение информации о пользователе (Имя, Фамилия, Логин, Дата рождения, Дата регистрации, Аватар)

##### Специальные заголовки: нет

##### Тело: нет

#### Ответ

##### Специальные заголовки: нет

##### Тело: данные о пользователе

```
  {
  "id_user":2,
  "name": "Василий",
  "surname":"Петров", 
  "login":"Vasek",
  "email":"vasek@mail.ru",
  "date_birth":"2000-01-01",
  "dateRegistration":"2000-01-01",
  "avatarUrl":"https://pgcookbook.ru/programming/vasia.jpg"
  }
  ```

##### Возможные коды ответа:

- 200 - данные пользователя успешно получены
- 403 - нет прав для получения данных
- 404 - по данному id пользователь не найден
- 500 - неизвестная ошибка сервера

Ответы в случае ошибок:

| Ошибка | Ответ                                                                                                                             |
|--------|-----------------------------------------------------------------------------------------------------------------------------------|
| 403    | {<br/>"status": "FORBIDDEN",  <br/>"message": "Нет прав для совершения операции",  <br/>"date": "2023-09-11 19:06:04"<br/>}       |
| 404    | {<br/>"status": "NOT_FOUND",  <br/>"message": "Пользователь c id 10 не найден ",  <br/>"date": "2023-09-11 19:06:04"<br/>}        |
| 500    | {<br/>"status": "INTERNAL_SERVER_ERROR",  <br/>"message": "Неизвестная ошибка сервера",  <br/>"date": "2023-09-11 19:06:04"<br/>} |

### Контроллер /users/lessons

#### Запрос GET /users/{userId}/lessons?from=2020-12-25&&to=2020-12-31 - получение информации о запланированных пользователем уроках в заданном диапазоне, включая указанные даты. Если параметры не указаны - то возвращаются уроки за текущую неделю. Список отсортирован от меньшей даты к большей. Список параметров по каждому событию:

- Дата
- Время начала
- Время окончания
- Название предмета
- Прогресс
- Отметка о выполнении (выставляется при % выполнения 100 автоматически или вручную при любом % выполнения - за это
  отвечает бэк)

##### Специальные заголовки:

##### Тело: нет

#### Ответ

##### Специальные заголовки: нет

##### Тело: массив уроков за указанный диапазон, отсортированный от меньшей даты к большей

```
[
  {
    "idLesson": 1,
    "subject": {
      "idSubject": 1,
      "name": "Математика"
    },
    "topic": "Считаем до 5",
    "date": "2023-09-11",
    "timeStart": "09:00:00",
    "timeEnd": "09:40:00",
    "progress": 0,
    "checkSuccessfully": false
  },
  {
    "idLesson": 2,
    "subject": {
      "idSubject": 4,
      "name": "Технология"
    },
    "topic": "Переходим дорогу",
    "date": "2023-09-11",
    "timeStart": "10:00:00",
    "timeEnd": "10:40:00",
    "progress": 0,
    "checkSuccessfully": false
  }
]
```

##### Возможные коды ответа:

- 200 - данные успешно получены
- 400 - ошибка в строке запроса
- 403 - нет прав для получения данных
- 500 - неизвестная ошибка сервера

  Ответы в случае ошибок:

| Ошибка | Дополнительная информация                                      | Ответ                                                                                                                                       |
|--------|----------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------|
| 400    | Ошибка в строке запроса <br/>(например, несуществующая дата)   | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Неверный параметр запроса: проверьте параметры",  <br/>"date": "2023-09-11 19:06:04"<br/>} |
| 403    | нет                                                            | {<br/>"status": "FORBIDDEN",  <br/>"message": "Нет прав для совершения операции",  <br/>"date": "2023-09-11 19:06:04"<br/>}                 |
| 500    | нет                                                            | {<br/>"status": "INTERNAL_SERVER_ERROR",  <br/>"message": "Неизвестная ошибка сервера",  <br/>"date": "2023-09-11 19:06:04"<br/>}           |

#### Запрос GET /users/{userId}/lessons/{lessonId}- получение информации о конкретном уроке. Возвращаются данные:

- Дата
- Время начала
- Время окончания
- Название предмета
- Ссылка на теорию (ссылка на файл, пока просто храним как строку)
- Ссылка на практическое задание (ссылка на файл, пока просто храним как строку)
- Ссылка на домашнюю рабооту (ссылка на файл, пока просто храним как строку)
- % выполнения (от 0 до 100%)
- Отметка о выполнении (выставляется при % выполнения 100 автоматически или вручную при любом % выполнения)

##### Специальные заголовки: нет

##### Тело: нет

#### Ответ

##### Специальные заголовки: нет

##### Тело: данные об уроке с указанным id

```
{
  "idLesson": 2,
  "subject": {
    "idSubject": 4,
    "name": "Технология"
  },
  "topic": "Переходим дорогу",
  "date": "2023-09-11",
  "timeStart": "10:00:00",
  "timeEnd": "10:40:00",
  "theoryUrl": "https://pgcookbook.ru/programming/1.htm",
  "practiceUrl": "https://pgcookbook.ru/programming/1.htm",
  "homeworkUrl": "https://pgcookbook.ru/programming/1.htm",
  "progress": 0,
  "checkSuccessfully": false
}
```

##### Возможные коды ответа:

- 200 - данные успешно получены
- 403 - нет прав для получения данных
- 404 - урок не найден
- 500 - неизвестная ошибка сервера

  Ответы в случае ошибок:

| Ошибка | Дополнительная информация                                    | Ответ                                                                                                                                  |
|--------|--------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| 403    | нет                                                          | {<br/>"status": "FORBIDDEN",  <br/>"message": "Нет прав для совершения операции",  <br/>"date": "2023-09-11 19:06:04"<br/>}            |
| 404    | Урок у указанного пользователя <br/>с указанныи id не найден | {<br/>"status": "NOT_FOUND",  <br/>"message": "У пользователя с id 1 не найден урок с id 1",  <br/>"date": "2023-09-11 19:06:04"<br/>} |
| 500    | нет                                                          | {<br/>"status": "INTERNAL_SERVER_ERROR",  <br/>"message": "Неизвестная ошибка сервера",  <br/>"date": "2023-09-11 19:06:04"<br/>}      |

#### Запрос POST /users/{userId}/lessons - создание нового урока, в теле данные урока

##### Специальные заголовки:

Content-Type : application/json

##### Тело:

```
{
  "subject": {
    "idSubject": 2
  },
  "topic": "Предлоги",
  "date": "2023-09-14",
  "timeStart": "09:40:00",
  "timeEnd": "09:40:00",
  "theoryUrl": "https://habr.com/ru/theoryUrl.htm",
  "practiceUrl": "https://habr.com/ru/practiceUrl.htm",
  "homeworkUrl": "https://habr.com/ru/homeworkUrl.htm",
  "progress": 0,
  "checkSuccessfully": false
}
```

#### Ответ

##### Специальные заголовки: нет

##### Тело: данные о созданном уроке

```
{
  "idLesson": 29,
  "subject": {
    "idSubject": 2,
    "name": "Русский язык"
  },
  "topic": "Предлоги",
  "date": "2023-09-24",
  "timeStart": "09:40:00",
  "timeEnd": "09:40:00",
  "theoryUrl": "https://habr.com/ru/theoryUrl.htm",
  "practiceUrl": "https://habr.com/ru/practiceUrl.htm",
  "homeworkUrl": "https://habr.com/ru/homeworkUrl.htm",
  "progress": 0,
  "checkSuccessfully": false
}
```

##### Возможные коды ответа:

- 201 - урок успешно создан
- 400 - ошибка в запросе
- 403 - нет прав для создания урока
- 500 - неизвестная ошибка сервера

  Ответы в случае ошибок:

| Ошибка | Дополнительная информация               | Ответ                                                                                                                                                               |
|--------|-----------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 400    | Ошибка в JSON                           | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Неверная структура объекта: проверьте скобки, запятые и названия полей",  <br/>"date": "2023-09-11 19:06:04"<br/>} |
| 400    | Не указан id предмета                   | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Id предмета обязателен для заполнения; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                |
| 400    | Не указана тема урока/пустая            | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Тема урока обязательна для заполнения; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                |
| 400    | Не указана дата урока/пустая            | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Дата урока обязательна для заполнения; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                |
| 400    | Не указано время начала урока/пустое    | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Время начала урока обязательно для заполнения; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}                        |
| 400    | Не указано время окончания урока/пустое | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Время окончания урока обязательно для заполнения; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}                     |
| 403    | нет                                     | {<br/>"status": "FORBIDDEN",  <br/>"message": "Нет прав для совершения операции",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                         |
| 404    | Указан предмет с несуществующим id      | {<br/>"status": "NOT_FOUND",  <br/>"message": "Предмет c id 0 не найден",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                                 |
| 500    | нет                                     | {<br/>"status": "INTERNAL_SERVER_ERROR",  <br/>"message": "Неизвестная ошибка сервера",  <br/>"date": "2023-09-11 19:06:04"<br/>}                                   |

Ограничения на длину полей при создании урока:

| Поле              | Ограничение                                                            | Код ответа | Ответ  в случае если ограничение не выполнено                                                                                                     |
|-------------------|------------------------------------------------------------------------|------------|---------------------------------------------------------------------------------------------------------------------------------------------------|
| subject.idSubject | Должно существовать с таблице subjects                                 | 404        | {<br/>"status": "NOT_FOUND",<br/>"message": "Предмет c id 0 не найден.",<br/>"date": "2023-09-13 19:46:24"<br/>}<br/>                             |
| subject.idSubject | Обязательное                                                           | 400        | {<br/>"status": "BAD_REQUEST",<br/>"message": "Id предмета обязателен для заполнения; ",<br/>"date": "2023-09-13 19:47:53"<br/>}                  |
| topic             | Обязательное                                                           | 400        | {<br/>"status": "BAD_REQUEST",<br/>"message": "Тема урока обязательна для заполнения; ",<br/>"date": "2023-09-13 19:55:12"<br/>}                  |
| topic             | Не более 500 символов                                                  | 400        | {<br/>"status": "BAD_REQUEST",<br/>"message": "Тема урока должна быть не больше 500 знаков; ",<br/>"date": "2023-09-13 19:55:12"<br/>}            |
| date              | Обязательное                                                           | 400        | {<br/>"status": "BAD_REQUEST",<br/>"message": "Дата урока обязательна для заполнения; ",<br/>"date": "2023-09-13 19:56:09"<br/>}                  |
| timeStart         | Обязательное                                                           | 400        | {<br/>"status": "BAD_REQUEST",<br/>"message": "Время начала урока обязательно для заполнения; ",<br/>"date": "2023-09-13 19:59:16"<br/>}          |
| timeEnd           | Обязательное                                                           |            | {<br/>"status": "BAD_REQUEST",<br/>"message": "Время окончания урока обязательно для заполнения; ",<br/>"date": "2023-09-13 19:59:16"<br/>}       |
| theoryUrl         | Не обязательное, не более 1000 символов                                | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Длина адреса должна быть не больше 1000 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}     |
| practiceUrl       | Не обязательное, не более 1000 символов                                | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Длина адреса должна быть не больше 1000 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}     |
| homeworkUrl       | Не обязательное, не более 1000 символов                                | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Длина адреса должна быть не больше 1000 знаков; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}     |
| progress          | Не обязательное, целое число от 0 (включительно) до 100 (включительно) | 400        | {<br/>"status": "BAD_REQUEST",  <br/>"message": "Прогресс должен быть числом от 0 до 100; ",  <br/>"date": "2023-09-11 19:06:04"<br/>}            |
| checkSuccessfully | Не обязательное                                                        |            |                                                                                                                                                   |

## Запрос PATCH /users/{userId}/lessons/{lessonId} - изменение урока, в теле данные урока

##### Специальные заголовки:

Content-Type : application/json

##### Тело:

```
{
  "subject": {
    "idSubject": 2
  },
  "topic": "Предлоги",
  "date": "2023-09-16",
  "timeStart": "15:40:00",
  "timeEnd": "16:00:00",
  "theoryUrl": "https://habr.com/ru/theoryUrl.htm",
  "practiceUrl": "https://habr.com/ru/practiceUrl.htm",
  "homeworkUrl": "https://habr.com/ru/homeworkUrl.htm",
  "progress": 100,
  "checkSuccessfully": true
}
```

#### Ответ

##### Специальные заголовки: нет

##### Тело: обновленная информация об уроке

```
{
  "idLesson": 1,
  "subject": {
    "idSubject": 2,
    "name": "Русский язык"
  },
  "topic": "Предлоги",
  "date": "2023-09-16",
  "timeStart": "15:40:00",
  "timeEnd": "16:00:00",
  "theoryUrl": "https://habr.com/ru/theoryUrl.htm",
  "practiceUrl": "https://habr.com/ru/practiceUrl.htm",
  "homeworkUrl": "https://habr.com/ru/homeworkUrl.htm",
  "progress": 100,
  "checkSuccessfully": true
}
```

##### Возможные коды ответа:

- 200 - данные успешно обновлены
- 400 - ошибка в запросе
- 403 - нет прав для изменения данных
- 404 - урок не найден
- 500 - неизвестная ошибка сервера

Ответы в случае ошибок:  
аналогичны ответам при создании урока

Ограничения на длину полей при редактировании урока:  
аналогичны ответам при создании урока

#### Запрос DELETE /users/{userId}/lessons/{lessonId} - удаление урока

##### Специальные заголовки:нет

##### Тело: нет

#### Ответ

##### Специальные заголовки: нет

##### Тело: нет

##### Возможные коды ответа:

- 204 - урок успешно удален
- 404 - пользователь или урок не найден
- 403 - нет прав для удаления урока
- 500 - неизвестная ошибка сервера

| Ошибка | Дополнительная информация             | Ответ                                                                                                                             |
|--------|---------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| 403    | нет                                   | {<br/>"status": "FORBIDDEN",  <br/>"message": "Нет прав для совершения операции",  <br/>"date": "2023-09-11 19:06:04"<br/>}       |
| 404    | Пользователь с указанным id не найден | {<br/>"status": "NOT_FOUND",  <br/>"message": "Пользователь c id 10 не найден ",  <br/>"date": "2023-09-11 19:06:04"<br/>}        |
| 404    | Урок с указанным id не найден         | {<br/>"status": "NOT_FOUND",  <br/>"message": "Урок c id 0 не найден",  <br/>"date": "2023-09-11 19:06:04"<br/>}                  |
| 500    | нет                                   | {<br/>"status": "INTERNAL_SERVER_ERROR",  <br/>"message": "Неизвестная ошибка сервера",  <br/>"date": "2023-09-11 19:06:04"<br/>} |

### Контроллер /subjects

#### Запрос GET /subjects - возвращает список предметов

##### Тело: нет

#### Ответ

##### Специальные заголовки: нет

##### Тело: массив предметов

```
[{
		"subject": {
			"idSubject": 1,
			"name": "Математика"
		}
	},
	{
		"subject": {
			"idSubject": 2,
			"name": "Русский язык"
		}
	},
	{
		"subject": {
			"idSubject": 3,
			"name": "Технология"
		}
	}
]
  ```

##### Возможные коды ответа:

- 200 - данные успешно получены
- 403 - нет прав для получения данных
- 500 - неизвестная ошибка сервера

| Ошибка | Дополнительная информация               | Ответ                                                                                                                             |
|--------|-----------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| 403    | нет                                     | {<br/>"status": "FORBIDDEN",  <br/>"message": "Нет прав для совершения операции",  <br/>"date": "2023-09-11 19:06:04"<br/>}       |
| 500    | нет                                     | {<br/>"status": "INTERNAL_SERVER_ERROR",  <br/>"message": "Неизвестная ошибка сервера",  <br/>"date": "2023-09-11 19:06:04"<br/>} |

## Фичи для дальнейшего развития

- добавить регистрацию и авторизацию
- добавить проверку при создании урока на пересечение урока с уже существующими (если урок пересекается с другим,
  сообщать об этом и урок не создавать)
- добавить проверку что время начала урока не раньше его окончания
- добавить вывод в интерефейс по дням, неделям, месяцам (?)
- в списке предметов сделать сортировку по алфавиту (метод GET /subjects)
- в логине пользователя ограничить символы: можно использовать только английские буквы и цифры
- добавить сохранение логов на сервере в файл (бэкенд)
- реализовать обновление сущностей с помощью PATCH запросов в случае если приходит от одного до полного количества полей объекта (и для пользователя и для урока)
